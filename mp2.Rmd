---
title: "Mini-Project 2"
author: "Paige Patrick and Vanessa Morales"
date: "October 31, 2017"
output: html_document
---


## Loading the data


```{r}
load("candidates.rda")
load("contributions.rda")
```


```{r}
library(dplyr)
library(tidyverse)
library(ggplot2)
```

The first step was narrowing down the information that we needed from each of the two different tables that we wanted to work with. From the contributions table, we needed the transaction type, the candidate ID associated with that particular transaction type, and the total amount of money spent toward each candidate. From the candidates table, we really only need the candidate name associated with it's corresponding candidate ID. Throughout our process, we thought it was important to create new data sets every time we wrangled, instead of replacing an existing data set, in order to be able to easily go back and look at previous information if need be.

```{r}
transaction_info <- contributions %>%
  group_by(transaction_type, cand_id) %>%
  summarise(transaction_total = sum(transaction_amt))
```

```{r}
candidates_info <- candidates %>%
  group_by(cand_id, cand_name)

candidates_info <- candidates_info[,c("cand_id", "cand_name")]
```

The next step was joining both of the tables together. This way we could have the candidate name, not just the ID, how much money was spent toward each candidate, and transaction type of the money spent all in the same table. Because both of our new data sets had a "cand_id" variable, it was easy to join the two together.

```{r}
transaction_and_candidate <- transaction_info %>%
  inner_join(candidates_info, by = c("cand_id"))
```

We wanted to graph only a couple of candidates. We based our decision off of the top candidates that had the highest amount of money spent toward them. 

```{r}
most_expensive_pres_candidates <- transaction_and_candidate %>%
  group_by(cand_name, cand_id) %>%
  summarise(contribution_total = sum(transaction_total))
```

When Barack Obama and Mitt Romney were the highest and second highest candidate on our list, we decided to only focus on them. We thought this would be an interesting comparison, since they ran against each other in the 2012 Presidential Election. We decided to filter the data to include only the information we needed for those two candidates. Again, we created a brand new table in order to not lose the previous table we created. 

```{r}
transaction_and_pres_candidates <- transaction_and_candidate %>%
  filter(cand_id == "P80003338" | cand_id == "P80003353")
```

Because the point of our graph is to show the amount of money spent either supporting or opposing these candidates, we thought it would be cleaner to only have two different legends, instead of graphing the individual different transaction types. We looked up the different transaction types and determined if the objective of each ws to either support or oppose a candidate. We found that only two out of the seven types' goals are to oppose a candidate. We realized we needed to create a different column showing this, in order to group these transaction types together in the future.

```{r}
support_pres_candidates <- transaction_and_pres_candidates %>%
  group_by(cand_id, cand_name) %>%
  mutate(support_true = transaction_type  %in% c("24C", "24E", "24F", "24K", "24Z"))
```

After correctly labeling the different transaction types as true (supported candidate) or false (opposed candidate), we then need the total amounts for transaction types that spent money opposing candidates and a total amount for transaction types that spent money supporting candidates. Since we had previously created a coloumn specifying the objectives of each transaction type, it made it easy to group them together and find the totals for each.

```{r}
support_total_pres_candidates <- support_pres_candidates %>%
  group_by(cand_id, cand_name, support_true) %>%
  summarise(support_total = sum(transaction_total))
```

After we had the candidates and the amount of money spent either supporting or opposing them, we were ready to start graphing. 

```{r}
library(RColorBrewer)
display.brewer.all()
```

```{r}
ggplot(support_total_pres_candidates, aes(x = cand_name, y = support_total, fill = support_true)) +
  geom_bar(stat = "identity") +
  ggtitle("Financial Allocations Toward\n2012 Presidential Candidates") +
  scale_x_discrete("Candidates", labels = c("Barack Obama", "Mitt Romney")) + 
  scale_y_continuous("Amount Spent", labels = scales::dollar) +
  labs(fill = "Allocation Objective") +
  scale_fill_brewer(palette = "Set1", labels = c("Opposing Candidate", "Supporting Candidate")) +
  theme(plot.title = element_text(hjust = 0.5, size = 20, face = "bold"),
        axis.ticks.length = unit(0.50, "cm"),
        panel.background = element_rect(fill = "white"),
        panel.grid.major = element_line(colour = "white"),
        panel.grid.minor = element_line(colour = "white"),
        legend.title = element_text(size = 15), 
        legend.text = element_text(size = 13),
        axis.title = element_text(size = 20),
        axis.text = element_text(size = 15),
        axis.ticks.x = element_blank())
```

##Financial Allocations Spent By Committees for the 2012 Presidential Campaign 
``
``

Our data graphic shows the amount spent by committees for Barack Obama and Mitt Romney; The red represents money spent opposing the candidate and the blue indicates money spent supporting the candidate. 

The x-axis displays the two final candidates for the 2012 presidential election; Barack Obama and Mitt Romney.  The y-axis displays the total amount of money spent by committees.  

We categorized the committee codes by transaction type based on either positive or negative money spent for or against a candidate. 
The transaction codes used by committees are as follows:

Money Spent Opposing Candidate:

24A-Independent expenditure opposing election of candidate  
24N-Communication cost against candidate (only for Form 7 filer)  
24K-Contribution made to non affiliated committee  

Money Spent Supporting Candidate:

24E-Independent expenditure advocating election of candidate  
24C-Coordinated party expenditure  
24F-Communication cost for candidate (only for Form 7 filer)  
24Z-In-kind contribution made to registered filer  

By using the transaction code and therefore the intention of the money, we are able to look at the amount of money going either for or against each candidate.  Our data graphic shows that 2.5 times more money was spent opposing Barack Obama than was spent opposing Mitt Romney. We felt this was interesting because it shows the sheer amount of effort spent against Barack Obama. 

To give an example of what money spent against Barack Obama goes to: below is an ad that ran during the 2012 election cycle. It is paid for by the committee Crossroads Grassroots Policy Strategies.  This committee's number 1 transaction type is 24A, (24A-Independent expenditure opposing election of candidate), against Barack Obama. 

![Ad against Obama, provided by ProPubica.org](https://assets.propublica.org/legacy/images/_threeTwo800w/gps_tv_ad_390x260_120813.jpg "Anti-Obama Ad")

Restore Our Future, American Crossroads, Americans for Prosperity, and Crossroads Grassroots Policy Strategies are all Republican affiliated committees and they constitute the top **17** contributes of money spent to Obama, these are **negative** (using code 24A; Independent expenditure opposing election of candidate). Obama does not get a postie contribution until The Democratic National Committee squeezes in the 18 top contributing spot.

Alternately, The Republican National Committee, Restore our Future, Republican National Committee make up the top 4 committee contributors to Mitt Romney. His first **negative** money doesn't come until the 5ht spot with Priories USA Action (using code 24A; Independent expenditure opposing election of candidate)

We chose to show the net positive and negative amounts of this number crunching and committee affiliation in our data graphic so that the broader picture of money spent for or against a candidate can be clear. 









